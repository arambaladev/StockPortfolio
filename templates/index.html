<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stock Portfolio</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
        <h1>Stock Portfolio</h1>
        <a href="{{ url_for('transactions', open_modal=true) }}"><button style="background-color: #007bff; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 16px;">Add Investment</button></a>
    </div>
    <h2 style="text-align: left; margin-top: 0; margin-bottom: 20px;">Current Value: ${{ "%.2f"|format(total_portfolio_value) }}</h2>
    <table>
        <tr>
            <th style="background-color: maroon; color: white;">Ticker Symbol</th>
            <th style="background-color: maroon; color: white;">Quantity</th>
            <th style="background-color: maroon; color: white;">Latest Price</th>
            <th style="background-color: maroon; color: white;">Value</th>
            <th style="background-color: maroon; color: white;">% of Portfolio</th>
            <th style="background-color: maroon; color: white;">XIRR</th>
        </tr>
        {% for item in portfolio_data %}
        <tr>
            <td>{{ item.tickersymbol }}</td>
            <td>{{ item.quantity }}</td>
            <td>${{ "%.2f"|format(item.latest_price) }}</td>
            <td>${{ "%.2f"|format(item.value) }}</td>
            <td>{{ "%.2f"|format(item.percentage) }}%</td>
            <td>
                {% if item.xirr is not none %}
                    {{ "%.2f"|format(item.xirr * 100) }}%
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
        <a href="{{ url_for('stocks_list') }}"><button style="background-color: #007bff; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 16px;">Stocks</button></a>
        <a href="{{ url_for('prices') }}"><button style="background-color: #007bff; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 16px;">Prices</button></a>
    </div>
</body>
</html>
